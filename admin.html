<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>ADMIN KEY</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{background:#000;color:#00ff66;font-family:monospace}
.box{max-width:420px;margin:auto;border:2px solid #00ff66;padding:12px}
input,select,button{width:100%;padding:10px;margin:6px 0;background:#000;color:#00ff66;border:1px solid #00ff66}
.list{border:1px dashed #00ff66;padding:8px;margin-top:10px;font-size:13px}
.key{display:flex;justify-content:space-between;margin:4px 0}
</style>
</head>
<body>

<div class="box">
<h3>üîë ADMIN KEY</h3>

<input id="key" placeholder="Nh·∫≠p key">
<select id="type">
<option value="FREE">FREE</option>
<option value="VIP">VIP</option>
</select>

<button onclick="createKey()">‚ûï T·∫†O KEY</button>

<div class="list" id="list">Loading...</div>
</div>

<script>
const SERVER="https://admin-key-server.onrender.com";

async function loadKeys(){
  const res = await fetch(SERVER+"/admin/keys");
  const data = await res.json();
  let html="";
  Object.keys(data).forEach(k=>{
    html+=`
      <div class="key">
        <span>${k} (${data[k].type})</span>
        <button onclick="delKey('${k}')">‚ùå</button>
      </div>`;
  });
  list.innerHTML = html || "Ch∆∞a c√≥ key";
}

async function createKey(){
  if(!key.value) return alert("Nh·∫≠p key");
  const res = await fetch(SERVER+"/admin/create",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ key:key.value, type:type.value })
  });
  const d = await res.json();
  if(!d.ok) return alert(d.msg);
  key.value="";
  loadKeys();
}

async function delKey(k){
  if(!confirm("X√≥a key "+k+"?")) return;
  await fetch(SERVER+"/admin/delete",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ key:k })
  });
  loadKeys();
}

loadKeys();
</script>
</body>
</html>
